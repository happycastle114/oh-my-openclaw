# Configuration Reference

Complete reference for all Oh-My-OpenClaw configuration options.

---

## File Locations

| File | Purpose |
|------|---------|
| `config/categories.json` | Primary config — model routing, tmux, tool restrictions, skill triggers, defaults |
| `plugin/openclaw.plugin.json` | Plugin manifest — schema for runtime plugin options |
| `~/.openclaw/workspace/` | Default OpenClaw workspace root |
| `workspace/notepads/` | Wisdom notepad files (relative to workspace root) |
| `workspace/plans/` | Plan files generated by Prometheus |
| `workspace/checkpoints/` | Checkpoint snapshots from `omoc_checkpoint` |

> **Tip:** `config/openclaw.sample.json` shows how to merge agent tool profiles into your `openclaw.json` for runtime enforcement.

---

## Categories

Categories map task types to models and agents. Defined under the `"categories"` key in `config/categories.json`.

### Example

```json
{
  "categories": {
    "quick": {
      "model": "claude-sonnet-4-6",
      "description": "Simple fixes, searches, small tasks, file operations",
      "agents": ["sisyphus-junior", "explore", "librarian"],
      "alternatives": ["gpt-5.3-codex-spark", "gemini-3-flash"]
    },
    "multimodal": {
      "model": "gemini-2.5-flash",
      "description": "PDF/image/video analysis via Gemini CLI tmux session",
      "agents": ["multimodal-looker"],
      "tool": "gemini-cli",
      "alternatives": ["gemini-2.5-pro", "gemini-3.1-pro"]
    }
  }
}
```

### Category Options

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `model` | `string` | Yes | Primary model identifier to use for this category |
| `description` | `string` | No | Human-readable description of when this category applies |
| `agents` | `string[]` | No | Agent IDs that operate in this category |
| `alternatives` | `string[]` | No | Fallback models to swap in if the primary is unavailable |
| `tool` | `string` | No | External tool to route through (e.g. `"gemini-cli"` for multimodal) |

### All Categories

| Category | Default Model | Agents | Use Case |
|----------|--------------|--------|----------|
| `quick` | `claude-sonnet-4-6` | sisyphus-junior, explore, librarian | Simple fixes, searches, small tasks, file operations |
| `deep` | `claude-opus-4-6-thinking` | hephaestus, metis, momus | Complex refactoring, analysis, gap detection, plan review |
| `ultrabrain` | `gpt-5.3-codex` | prometheus, atlas, oracle | Deep logical reasoning, complex architecture decisions |
| `visual-engineering` | `gemini-3.1-pro` | frontend, multimodal-looker | Frontend, UI/UX, design, styling, animation, visual analysis |
| `multimodal` | `gemini-2.5-flash` | multimodal-looker | PDF/image/video analysis via Gemini CLI |
| `artistry` | `claude-opus-4-6-thinking` | _(none)_ | Highly creative/artistic tasks, novel ideas, design exploration |
| `writing` | `claude-sonnet-4-6` | _(none)_ | Documentation, prose, technical writing |
| `unspecified-low` | `claude-sonnet-4-6` | _(none)_ | Tasks that don't fit other categories, low effort required |
| `unspecified-high` | `claude-opus-4-6-thinking` | _(none)_ | Tasks that don't fit other categories, high effort required |

---

## Defaults

Global fallback values under the `"defaults"` key.

```json
{
  "defaults": {
    "fallback_category": "quick",
    "max_ralph_iterations": 10,
    "notepad_dir": "workspace/notepads",
    "plans_dir": "workspace/plans"
  }
}
```

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `fallback_category` | `string` | `"quick"` | Category used when no category can be determined from context |
| `max_ralph_iterations` | `number` | `10` | Maximum number of ralph loop iterations before auto-stop |
| `notepad_dir` | `string` | `"workspace/notepads"` | Directory for wisdom notepad files (relative to workspace root) |
| `plans_dir` | `string` | `"workspace/plans"` | Directory for plan files generated by Prometheus |

---

## tmux Configuration

Controls tmux session management for multi-tool orchestration. Defined under the `"tmux"` key.

```json
{
  "tmux": {
    "socket": "/tmp/openclaw-tmux-sockets/openclaw.sock",
    "max_concurrent_sessions": 6,
    "session_templates": { ... }
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `socket` | `string` | Path to the tmux socket file shared across all sessions |
| `max_concurrent_sessions` | `number` | Maximum number of tmux sessions that can run simultaneously |
| `session_templates` | `object` | Named templates for session types (see below) |

### Session Templates

Sessions are named `{template}` or `{template}-{index}` (e.g. `opencode`, `opencode-2`, `gemini-3`).

#### `opencode`

Routes tasks to an OmO (OpenCode) coding agent.

```json
"opencode": {
  "description": "OmO coding agent — multiple instances supported",
  "default_agent": "sisyphus",
  "agents": {
    "sisyphus":   { "switch": "default", "description": "Quick implementation" },
    "hephaestus": { "switch": "Tab x1",  "description": "Deep autonomous work" },
    "prometheus": { "switch": "Tab x2",  "description": "Strategic planning" }
  },
  "startup": "export NODE_OPTIONS=\"--max-old-space-size=8192\" && cd $PROJECT_DIR && opencode",
  "ram_per_session": "2-4GB"
}
```

| Field | Description |
|-------|-------------|
| `default_agent` | Agent to activate when no agent is specified |
| `agents` | Map of agent ID → `{ switch, description }` — `switch` is the key sequence to select that agent's tab |
| `startup` | Shell command run when the session is created |
| `ram_per_session` | Approximate RAM usage per session (informational) |

#### `gemini`

Routes multimodal analysis tasks to Gemini CLI.

```json
"gemini": {
  "description": "Gemini CLI multimodal analysis — multiple instances supported",
  "default_model": "gemini-2.5-flash",
  "models": {
    "gemini-2.5-flash": { "flag": "-m gemini-2.5-flash", "speed": "fast",   "description": "Quick checks" },
    "gemini-2.5-pro":   { "flag": "-m gemini-2.5-pro",   "speed": "medium", "description": "Detailed analysis" },
    "gemini-3.1-pro":   { "flag": "-m gemini-3.1-pro",   "speed": "slow",   "description": "Highest quality" }
  },
  "ram_per_session": "~200MB"
}
```

| Field | Description |
|-------|-------------|
| `default_model` | Model used when no model is specified |
| `models` | Map of model ID → `{ flag, speed, description }` — `flag` is the CLI argument passed to `gemini` |

#### `build`

Dedicated session for build/test monitoring.

```json
"build": {
  "description": "Build/test monitoring session",
  "startup": "cd $PROJECT_DIR && npm run dev"
}
```

#### `research`

Dedicated session for research tasks (Gemini CLI or custom tools).

```json
"research": {
  "description": "Research-only session (Gemini CLI or custom tools)"
}
```

---

## Todo Enforcer

Controls automatic todo continuation injection. Defined under the `"todo_enforcer"` key.

```json
{
  "todo_enforcer": {
    "enabled": true,
    "directive": "[SYSTEM DIRECTIVE: OH-MY-OPENCLAW - TODO CONTINUATION]\nYou MUST continue working on incomplete todos.\n- Do NOT stop until all tasks are marked complete\n- Do NOT ask for permission to continue\n- Mark each task complete immediately when finished\n- If blocked, document the blocker and move to next task"
  }
}
```

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | `boolean` | `true` | Whether to inject the continuation directive when the agent idles with incomplete todos |
| `directive` | `string` | _(see above)_ | The exact prompt text injected to resume incomplete work |

> **Note:** Runtime timing (cooldown, max failures) is controlled by the plugin config — see [Plugin Configuration](#plugin-configuration-openclawpluginjson).

---

## Tool Restrictions

Prompt-level guidance for per-agent tool access. Defined under the `"tool_restrictions"` key.

> **Important:** These are prompt-level hints only. For runtime enforcement, merge the agent definitions from `config/openclaw.sample.json` into your `openclaw.json`.

```json
{
  "tool_restrictions": {
    "oracle":           { "deny": ["write", "edit", "apply_patch", "sessions_spawn"] },
    "librarian":        { "deny": ["write", "edit", "apply_patch", "sessions_spawn"] },
    "explore":          { "deny": ["write", "edit", "apply_patch", "sessions_spawn"] },
    "multimodal-looker":{ "allow": ["read", "image", "group:ui", "exec"] },
    "metis":            { "deny": ["write", "edit", "apply_patch", "sessions_spawn"] },
    "momus":            { "deny": ["write", "edit", "apply_patch", "sessions_spawn"] }
  }
}
```

### Per-Agent Summary

| Agent | Mode | Tools |
|-------|------|-------|
| `oracle` | deny-list | Blocks `write`, `edit`, `apply_patch`, `sessions_spawn` — read-only architect |
| `librarian` | deny-list | Blocks `write`, `edit`, `apply_patch`, `sessions_spawn` — read + web search only |
| `explore` | deny-list | Blocks `write`, `edit`, `apply_patch`, `sessions_spawn` — read + exec only |
| `multimodal-looker` | allow-list | Permits `read`, `image`, `group:ui`, `exec` only |
| `metis` | deny-list | Blocks `write`, `edit`, `apply_patch`, `sessions_spawn` — read-only analysis |
| `momus` | deny-list | Blocks `write`, `edit`, `apply_patch`, `sessions_spawn` — read-only critique |

### Runtime Enforcement (openclaw.sample.json)

For hard enforcement at the OpenClaw runtime level, add agent entries to your `openclaw.json`:

```json
{
  "agents": {
    "list": [
      {
        "id": "oracle",
        "tools": { "profile": "coding", "deny": ["write", "edit", "apply_patch", "sessions_spawn"] }
      },
      {
        "id": "librarian",
        "tools": {
          "allow": ["read", "exec", "web_search", "web_fetch", "memory_search", "memory_get", "sessions_list", "sessions_history", "session_status"]
        }
      },
      {
        "id": "hephaestus",
        "tools": { "profile": "full" },
        "subagents": { "allowAgents": ["explore", "librarian", "oracle"] }
      }
    ]
  }
}
```

See `config/openclaw.sample.json` for the full agent list.

---

## Skill Triggers

Skills auto-activate when the user's message contains matching keywords. Defined under the `"skills"` key.

```json
{
  "skills": {
    "git-master": {
      "trigger": ["commit", "rebase", "squash", "who wrote", "when was", "git history", "blame"],
      "path": "skills/git-master.md"
    }
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `trigger` | `string[]` | Keywords that activate this skill (case-sensitive substring match) |
| `path` | `string` | Path to the skill markdown file, relative to the oh-my-openclaw root |

### All Skill Triggers

| Skill | Trigger Keywords |
|-------|----------------|
| `git-master` | `commit`, `rebase`, `squash`, `who wrote`, `when was`, `git history`, `blame` |
| `frontend-ui-ux` | `UI`, `UX`, `frontend`, `design`, `styling`, `CSS`, `layout` |
| `comment-checker` | `comment check`, `AI slop`, `code quality`, `clean comments` |
| `gemini-look-at` | `look at`, `PDF`, `screenshot`, `diagram`, `visual`, `이미지 분석`, `PDF 확인` |
| `steering-words` | `ultrawork`, `search`, `analyze`, `분석해`, `찾아봐` |
| `delegation-prompt` | `delegate`, `위임`, `서브에이전트`, `sub-agent` |
| `multimodal-analysis` | `multimodal`, `멀티모달`, `image analysis` |

---

## Plugin Configuration (openclaw.plugin.json)

The `plugin/openclaw.plugin.json` manifest declares the plugin identity and the runtime configuration schema. Users set these values in their OpenClaw plugin settings.

```json
{
  "id": "oh-my-openclaw",
  "name": "Oh-My-OpenClaw",
  "version": "0.5.0",
  "tools": ["omoc_delegate", "omoc_look_at", "omoc_checkpoint"],
  "configSchema": {
    "type": "object",
    "properties": {
      "max_ralph_iterations": { "type": "number", "default": 10 },
      "todo_enforcer_enabled": { "type": "boolean", "default": true },
      ...
    }
  }
}
```

### Schema Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `max_ralph_iterations` | `number` | `10` | Maximum ralph loop iterations before the loop auto-stops. Hard cap is 100. |
| `todo_enforcer_enabled` | `boolean` | `true` | Enable todo continuation enforcement when the agent idles with incomplete todos |
| `todo_enforcer_cooldown_ms` | `number` | `2000` | Milliseconds to wait after agent idle before injecting the continuation prompt |
| `todo_enforcer_max_failures` | `number` | `5` | Maximum consecutive failures before entering an extended pause |
| `comment_checker_enabled` | `boolean` | `true` | Enable AI slop comment detection on every tool result (11 regex patterns) |
| `notepad_dir` | `string` | `"workspace/notepads"` | Directory for wisdom notepad files (relative to workspace root) |
| `plans_dir` | `string` | `"workspace/plans"` | Directory for plan files (relative to workspace root) |
| `checkpoint_dir` | `string` | `"workspace/checkpoints"` | Directory for checkpoint snapshots saved by `omoc_checkpoint` |

### Plugin Tools

| Tool | Description |
|------|-------------|
| `omoc_delegate` | Category-based task delegation with automatic model routing |
| `omoc_look_at` | Multimodal analysis via Gemini CLI + tmux |
| `omoc_checkpoint` | Save, load, and list execution checkpoints |

### Plugin Hooks

| Hook | Event | Description |
|------|-------|-------------|
| `todo-enforcer` | `agent:bootstrap` | Injects the TODO continuation directive at session start |
| `comment-checker` | `tool_result_persist` | Scans code for AI slop comments using 11 regex patterns |
| `message-monitor` | `message:sent` | Audit logging and message counter |
| `message-received-monitor` | `message:received` | Audit logging for inbound messages |
| `gateway-startup` | `gateway:startup` | Plugin activation/startup logging |

---

## Further Reading

- [`config/openclaw.sample.json`](../../config/openclaw.sample.json) — Full runtime agent tool profile example
- [`plugin/openclaw.plugin.json`](../../plugin/openclaw.plugin.json) — Plugin manifest source
- [`SKILL.md`](../../SKILL.md) — Main skill definition loaded by OpenClaw
- [Agents Reference](../guide/) — Per-agent role descriptions and usage
- [Workflows Reference](../guide/) — `/ultrawork`, `/plan`, `/start_work`, and other commands
